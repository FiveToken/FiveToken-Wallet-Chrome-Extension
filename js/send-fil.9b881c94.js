!function(t){function e(e){for(var a,r,c=e[0],o=e[1],d=e[2],u=0,f=[];u<c.length;u++)r=c[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);for(l&&l(e);f.length;)f.shift()();return n.push.apply(n,d||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,c=1;c<s.length;c++){var o=s[c];0!==i[o]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},i={"send-fil":0},n=[];function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(s,a,function(e){return t[e]}.bind(null,a));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=(o=window.webpackJsonp=window.webpackJsonp||[]).push.bind(o);o.push=e;for(var o=o.slice(),d=0;d<o.length;d++)e(o[d]);var l=c;n.push([27,"chunk-vendors","chunk-common"]),s()}({"0ce9":function(t,e,s){},27:function(t,e,s){t.exports=s("306f")},28:function(t,e){},"306f":function(t,e,s){"use strict";s.r(e),s("0fae");var a=s("9e2f"),i=s.n(a),n=(s("e260"),s("e6cf"),s("cca6"),s("a79d"),s("2b0e")),r=s("5530"),c=s("2909"),o=s("1da1"),d=(s("4de4"),s("d81d"),s("a9e3"),s("d3b7"),s("25f0"),s("96cf"),s("e725")),l=(s("b680"),s("ed08")),u={data:function(){return{filValue:"",toValue:"",clearable:!0,logo:s("a1d8"),addressRecordLast:[],addressBook:[],accountList:[],newAddress:!0}},props:{balance:Number,type:Number,price_usd:Number,customVisible:Boolean,address:String,ordinary:Object,fast:Object,custom:Object,step:Number,to:String,fil:Number,pageType:String},filters:{addressFormat:function(t){return 12<t.length?t.substr(0,6)+"..."+t.substr(t.length-6,6):t}},computed:{disabled:function(){return""!==this.to&&""!==this.filValue},filUsd:function(){return/^[+-]?(0|([1-9]\d*))(\.\d+)?$/.test(this.filValue)?(this.filValue*this.price_usd).toFixed(2):0},pageName:function(){var t="";switch(this.pageType){case"add-address":t=this.$t("sendFil.addReveice");break;case"send-fil":t=this.$t("sendFil.sendFil");break;case"my-address":case"add-address":t=this.$t("sendFil.addReveice")}return t},toMyAddressvisible:function(){return 1<this.accountList.length}},watch:{filValue:function(t){t?this.$emit("update:fil",Number(t)||0):this.$emit("update:fil",0)},toValue:function(t){var e;t?(e=this.addressBook.some((function(e){return e.address!==t})),this.newAddress=e,this.$emit("update:to",t)):(this.newAddress=!1,this.$emit("update:to",""))}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.fil&&(t.filValue=t.fil),t.toValue=t.to,e.next=4,window.filecoinwalletDb.addressRecordLast.where({kunyao:"kunyao"}).toArray();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=[];case 7:return s=e.t0,t.addressRecordLast=s.filter((function(e){return e.address===t.address})),e.next=11,window.filecoinwalletDb.addressBook.where({kunyao:"kunyao"}).toArray();case 11:if(e.t1=e.sent,e.t1){e.next=14;break}e.t1=[];case 14:return a=e.t1,t.addressBook=a,e.next=18,window.filecoinwalletDb.accountList.where({kunyao:"kunyao"}).toArray();case 18:if(e.t2=e.sent,e.t2){e.next=21;break}e.t2=[];case 21:a=e.t2,t.accountList=a;case 24:case"end":return e.stop()}}),e)})))()},methods:{cancel:function(){window.location.href="./wallet.html"},formatFil:function(t){return Object(l.d)(t/Math.pow(10,18))},searchChange:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.toValue)return e.abrupt("return");e.next=2;break;case 2:if(Object(l.g)(t.toValue)){e.next=7;break}t.$emit("update:pageType","address-error"),e.next=11;break;case 7:return t.$emit("update:pageType","send-fil"),s=parseInt((new Date).getTime()/1e3),e.next=11,window.filecoinwalletDb.addressRecordLast.add({address:t.toValue,create_time:s,kunyao:"kunyao"});case 11:case"end":return e.stop()}}),e)})))()},clear:function(){this.$emit("update:pageType","add-address")},toMyAddress:function(){this.$emit("update:pageType","my-address")},back:function(){this.$emit("update:pageType","add-address")},selectCost:function(t){3===t?this.$emit("update:customVisible",!0):this.$emit("update:type",t)},openDialog:function(){this.$emit("update:customVisible",!0)},addressClick:function(t){Object(l.g)(t)?(this.$emit("update:pageType","send-fil"),this.toValue=t):this.$emit("update:pageType","address-error")},next:function(){this.$emit("next")},reset:function(){this.$emit("reset")},toAddressBook:function(){window.location.href="./setting-address.html?to=".concat(this.toValue)}}},f=(s("d266"),s("2877")),p=(e=Object(f.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"send-fil-component"},[s("div",{staticClass:"top-title"},[s("div",{staticClass:"text"},[t._v(t._s(t.$t("sendFil.addReveice")))]),s("div",{staticClass:"cancel",on:{click:t.cancel}},[t._v(t._s(t.$t("sendFil.cancel")))])]),s("div",{staticClass:"search"},[s("el-input",{attrs:{clearable:t.clearable},on:{input:t.searchChange,clear:t.clear},model:{value:t.toValue,callback:function(e){t.toValue=e},expression:"toValue"}},[s("i",{staticClass:"el-icon-search",attrs:{slot:"prepend"},slot:"prepend"})])],1),"add-address"===t.pageType?s("div",{staticClass:"add-address-box"},[t.toMyAddressvisible?s("div",{staticClass:"my-address 22",on:{click:t.toMyAddress}},[t._v(t._s(t.$t("sendFil.inMyAccount")))]):t._e(),t.addressRecordLast.length?s("div",{staticClass:"recently-name"},[t._v(t._s(t.$t("sendFil.lastRecord")))]):t._e(),t.addressRecordLast.length?s("div",{staticClass:"recently-list"},t._l(t.addressRecordLast,(function(e,a){return s("div",{key:a,staticClass:"recently-item",on:{click:function(s){return t.addressClick(e.address)}}},[t._v(" "+t._s(t._f("addressFormat")(e.address))+" ")])})),0):t._e(),t.addressBook.length?s("div",{staticClass:"address-name"},[t._v(t._s(t.$t("sendFil.addressBook")))]):t._e(),t.addressBook.length?s("div",{staticClass:"address-list"},t._l(t.addressBook,(function(e,a){return s("div",{key:a,staticClass:"address-item",on:{click:function(s){return t.addressClick(e.address)}}},[s("div",{staticClass:"name"},[t._v(t._s(e.name))]),s("div",{staticClass:"address"},[t._v(t._s(t._f("addressFormat")(e.address)))])])})),0):t._e()]):t._e(),"send-fil"===t.pageType?s("div",{staticClass:"send-fil-box"},[t.newAddress?s("div",{staticClass:"new-address",on:{click:t.toAddressBook}},[t._v(t._s(t.$t("sendFil.addToaddress")))]):t._e(),s("div",{staticClass:"detail-item"},[s("div",{staticClass:"label"},[t._v(t._s(t.$t("sendFil.property")))]),s("div",{staticClass:"value"},[s("div",{staticClass:"logo"},[s("img",{staticClass:"img",attrs:{src:t.logo}})]),s("div",{staticClass:"fil-m"},[s("div",{staticClass:"balance"},[t._v(t._s(t.$t("sendFil.balance"))+":"+t._s(t.balance)+" FIL")])])])]),s("div",{staticClass:"detail-item"},[s("div",{staticClass:"label"},[t._v(t._s(t.$t("sendFil.amount")))]),s("div",{staticClass:"value"},[s("div",{staticClass:"fil-m"},[s("div",{staticClass:"fil"},[s("el-input",{attrs:{type:"number"},model:{value:t.filValue,callback:function(e){t.filValue=e},expression:"filValue"}}),s("span",[t._v("FIL")])],1),s("div",{staticClass:"usd"},[t._v(" "+t._s(t.filUsd)+" USD")])])])]),s("div",{staticClass:"detail-item"},[s("div",{staticClass:"label"},[t._v(t._s(t.$t("sendFil.cost")))]),3!==t.type?s("div",{staticClass:"systom-cost"},[s("div",{staticClass:"value-item",class:{active:t.fast.type===t.type},on:{click:function(e){return t.selectCost(t.fast.type)}}},[s("div",{staticClass:"type"},[t._v(t._s(t.fast.name))]),s("div",{staticClass:"fil"},[t._v(t._s(t.formatFil(t.fast.cost)))]),s("div",{staticClass:"usd"},[t._v(" "+t._s((t.fast.cost*t.price_usd/Math.pow(10,18)).toFixed(8))+" USD")])]),s("div",{staticClass:"value-item",class:{active:t.ordinary.type===t.type},on:{click:function(e){return t.selectCost(t.ordinary.type)}}},[s("div",{staticClass:"type"},[t._v(t._s(t.ordinary.name))]),s("div",{staticClass:"fil"},[t._v(t._s(t.formatFil(t.ordinary.cost)))]),s("div",{staticClass:"usd"},[t._v(t._s((t.ordinary.cost*t.price_usd/Math.pow(10,18)).toFixed(8))+" USD")])])]):s("div",{staticClass:"custom-cost"},[s("div",{staticClass:"left"},[s("div",{staticClass:"fil"},[t._v(t._s(t.formatFil(t.custom.cost)))]),s("div",{staticClass:"usd"},[t._v(t._s((t.custom.cost*t.price_usd/Math.pow(10,18)).toFixed(2))+" USD")])]),s("div",{staticClass:"right",on:{click:t.reset}},[t._v(t._s(t.$t("sendFil.reset")))])])]),s("div",{staticClass:"custom",on:{click:t.openDialog}},[s("div",{staticClass:"text"},[t._v(t._s(t.$t("sendFil.custom")))])]),s("div",{staticClass:"position"},[s("div",{staticClass:"btn-wrap"},[s("el-button",{on:{click:t.cancel}},[t._v(t._s(t.$t("sendFil.cancel")))]),s("el-button",{attrs:{type:"primary",disabled:!t.disabled},on:{click:t.next}},[t._v(t._s(t.$t("sendFil.next")))])],1)])]):t._e(),"my-address"===t.pageType?s("div",{staticClass:"my-address-list"},[s("div",{staticClass:"back",on:{click:t.back}},[t._v(t._s(t.$t("sendFil.backAll")))]),s("div",{staticClass:"my-address-name"},[t._v(t._s(t.$t("sendFil.myAccount")))]),s("div",{staticClass:"my-list"},t._l(t.accountList,(function(e,a){return s("div",{key:a,staticClass:"my-item",on:{click:function(s){return t.addressClick(e.address)}}},[s("div",{staticClass:"name"},[t._v(t._s(e.accountName))]),s("div",{staticClass:"address"},[t._v(t._s(t._f("addressFormat")(e.address)))])])})),0)]):t._e(),"address-error"===t.pageType?s("div",{staticClass:"search-error"},[t._v(" "+t._s(t.$t("sendFil.invalidReceiverAddress")))]):t._e()])}),[],!1,null,"dd581520",null).exports,a={data:function(){return{loading:s("9019"),password:"",error:""}},computed:{disabled:function(){return""===this.password}},props:{step:Number,accountName:String,to:String,fil:Number,filUsd:Number,gasFee:Number,totalFee:Number,gasFeeUsd:Number,totalFeeUsd:Number,pageType:String,confrim:Boolean},methods:{confirm:function(){this.$emit("update:confrim",!0),this.$emit("sendFil",this.password)},passwordInput:function(){this.error=""},back:function(){this.$emit("update:pageType","send-fil"),this.$emit("update:step",1)}}},u=(s("ee09"),Object(f.a)(a,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticClass:"confirm-content"},[e("div",{staticClass:"back",on:{click:t.back}},[e("i",{staticClass:"el-icon-arrow-left"}),e("span",[t._v(t._s(t.$t("sendFil.edit")))])]),e("div",{staticClass:"from-to"},[e("div",{staticClass:"from"},[t._v(t._s(t.accountName))]),t._m(0),e("div",{staticClass:"to"},[t._v(t._s(t.to))])]),e("div",{staticClass:"fil-content"},[e("div",{staticClass:"send"},[t._v(t._s(t.$t("sendFil.sendFil")))]),e("div",{staticClass:"amount"},[e("div",{staticClass:"fil"},[t._v(t._s(t.fil)+" FIL")]),e("div",{staticClass:"usd"},[t._v(t._s(t.filUsd)+" USD")])])]),e("div",{staticClass:"gas-content"},[e("div",{staticClass:"left"},[t._v("GAS FEE")]),e("div",{staticClass:"right"},[e("div",{staticClass:"g-middle"},[e("div",{staticClass:"amount"},[t._v(t._s(t.gasFee/Math.pow(10,18)))]),e("div",{staticClass:"unit"},[t._v(" FIL")])]),e("div",{staticClass:"g-bottom"},[t._v("$ "+t._s(t.gasFeeUsd/Math.pow(10,18)))])])]),e("div",{staticClass:"total-content"},[e("div",{staticClass:"left"},[t._v("TOTAL")]),e("div",{staticClass:"right"},[e("div",{staticClass:"t-top"},[t._v("AMOUNT + GAS FEE")]),e("div",{staticClass:"t-middle"},[e("div",{staticClass:"amount"},[t._v(t._s(t.totalFee/Math.pow(10,18)))]),e("div",{staticClass:"unit"},[t._v(" FIL")])]),e("div",{staticClass:"t-bottom"},[t._v("$ "+t._s(t.totalFeeUsd/Math.pow(10,18)))])])]),e("div",{staticClass:"input-item"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t("sendFil.password")))]),e("el-input",{attrs:{type:"password"},on:{input:t.passwordInput},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t.error?e("div",{staticClass:"error"},[t._v(" "+t._s(t.error)+" ")]):t._e(),e("div",{staticClass:"position"},[e("div",{staticClass:"btn-wrap"},[e("el-button",{on:{click:t.back}},[t._v(t._s(t.$t("sendFil.cancel")))]),e("el-button",{attrs:{type:"primary",disabled:t.disabled},on:{click:t.confirm}},[t._v(t._s(t.$t("sendFil.confirm")))])],1)]),t.confrim?e("div",{staticClass:"loading"},[e("img",{attrs:{src:t.loading,alt:""}})]):t._e()])}),[function(){var t=this.$createElement;t=this._self._c||t;return t("div",{staticClass:"icon"},[t("i",{staticClass:"el-icon-right"})])}],!1,null,"6f889f26",null).exports),s("7c15")),m=(s("99af"),s("5cc6"),s("9a8c"),s("a975"),s("735e"),s("c1ac"),s("d139"),s("3a7b"),s("d5d6"),s("82f8"),s("e91f"),s("60bd"),s("5f96"),s("3280"),s("3fcc"),s("ca91"),s("25a1"),s("cd26"),s("3c5d"),s("2954"),s("649e"),s("219c"),s("170b"),s("b39a"),s("72f7"),s("a630"),s("3ca3"),s("fb6a"),s("20bf"),s("1c35")),h=(a=s("8ddc"),s.n(a)),v=(a=s("c449"),s.n(a)),_=(a=s("0e80"),s.n(a)),g=s("b671"),b=(a=s("2612"),s.n(a)),y=s("fa0c"),C=(a=s("2fa0"),s.n(a)),F=(a=s("399f"),s.n(a)),w=(a=s("c8f6"),s.n(a));function $(){return($=Object(o.a)(regeneratorRuntime.mark((function t(e,s){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(){return k.apply(this,arguments)}(e,s);case 2:return a=t.sent,t.abrupt("return",{Message:e,Signature:{Type:1,Data:a}});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=Object(o.a)(regeneratorRuntime.mark((function t(e,s){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(){return x.apply(this,arguments)}(e);case 2:return a=t.sent,"string"==typeof s&&(s=m.Buffer.from(s,"base64")),"string"==typeof a&&(a=m.Buffer.from(a,"base64")),a=function(t,e){return t=function(t,e){return w.a.blake2b(t,null,e)}(t,32),t=g.ecsign(m.Buffer.from(t),m.Buffer.from(e)),e=28===Number(t.v)?"01":"00",e=t.r.toString("hex")+t.s.toString("hex")+e,m.Buffer.from(e,"hex").toString("base64")}(a,s),t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){return(x=Object(o.a)(regeneratorRuntime.mark((function t(e){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e,p=f=u=l=d=o=r=n=i=void 0,i=h.a.encode(a.Version),n=O(a.To),r=O(a.From),o=h.a.encode(a.Nonce),d=h.a.encode(j(a.Value)),l=h.a.encode(j(a.GasPremium)),p=h.a.encode(j(a.GasFeeCap)),u=h.a.encode(a.GasLimit),f=h.a.encode(a.Method),a=h.a.encode(m.Buffer.from(a.Params,"base64")),s=m.Buffer.from([138].concat(Object(c.a)(i),Object(c.a)(n),Object(c.a)(r),Object(c.a)(o),Object(c.a)(d),Object(c.a)(u),Object(c.a)(p),Object(c.a)(l),Object(c.a)(f),Object(c.a)(a))).toString("base64"),s=m.Buffer.from(s,"base64"),t.next=4,_()(s,45600,32);case 4:return s=t.sent,s=new v.a(1,"dag-cbor",s),t.abrupt("return",s.buffer.toString("base64"));case 7:case"end":return t.stop()}var a,i,n,r,o,d,l,u,f,p}),t)})))).apply(this,arguments)}function O(t){var e=Object(y.trim)(t);return 0!==Number(t[1])?h.a.encode(function(t){var e=Number(t[1]);return t=t.substring(2,t.length).toUpperCase(),t=new Uint8Array(C()(t,"RFC4648")),t=Array.from(t),(t=t.slice(0,t.length-4)).unshift(e),Uint8Array.from(t)}(e)):(t=[Number(t[1])],e=b.a.encode(Number(e.substr(2))),t=[].concat(Object(c.a)(t),Object(c.a)(e)),h.a.encode(m.Buffer.from(t)))}function j(t){return"0"===t?m.Buffer.from(""):(t=new F.a(t,10),t=t.toArrayLike(m.Buffer,"be",t.byteLength()),m.Buffer.concat([m.Buffer.from("00","hex"),t]))}var N=s("a07b"),T=(e=(s("2ef0"),{data:function(){return{confrim:!1,pageType:"add-address",address:"",balance:0,type:1,step:1,price_usd:0,customVisible:!1,ordinary:{name:this.$t("sendFil.normal"),type:2,cost:0},fast:{name:this.$t("sendFil.fast"),type:1,cost:0},custom:{name:this.$t("sendFil.custom"),type:3,gasfee_cap:0,nanofil:"",cost:0,totalFil:0},base_fee:"",gas_used:"",accountName:"",to:"",fil:0,gasFee:0,gasFeeUsd:0,totalFee:0,totalFeeUsd:0,filUsd:0,digest:"",nonce:0,maxNonce:0}},computed:{disabled:function(){return""!==this.custom.nanofil&&0!==this.custom.nanofil}},components:{bHeader:d.a,stepOne:e,stepTwo:u},watch:{to:function(t){this.getBaseFeeAndGas(t)}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.filecoinwalletDb.activeAccount.where({kunyao:"kunyao"}).toArray();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:s=e.t0,t.address=s.length&&s[0].address,t.accountName=s.length&&s[0].accountName,t.digest=s.length&&s[0].digest,t.getFilPricePoints(),t.getBalanceNonceByAddress();case 11:case"end":return e.stop()}}),e)})))()},methods:{getNextNonce:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var s,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=parseInt((new Date).getTime()/1e3),e.next=3,window.filecoinwalletDb.messageList.where({kunyao:"kunyao"}).toArray();case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:a=e.t0,i=a.filter((function(e){return e.from===t.address})),a=i&&i.map((function(t){return t.create_time}))||[],i=i&&i.map((function(t){return t.nonce||0}))||[],a=a.length&&Math.max.apply(Math,Object(c.a)(a))||0,i=i.length&&Math.max.apply(Math,Object(c.a)(i)),i=300<s-a?t.nonce:Math.max(t.nonce,i),t.maxNonce=i;case 16:case"end":return e.stop()}}),e)})))()},getBalanceNonceByAddress:function(){var t=this,e=this.address;Object(p.a)([{address:e}]).then((function(e){try{var s=e.data;s&&-32603===s.code?t.balance=0:(t.nonce=s.nonce,t.balance=Number(s.balance)/Math.pow(10,18),t.getNextNonce())}catch(e){}}))},getBaseFeeAndGas:function(t){var e=this;t=[t,0];Object(p.b)(t).then((function(t){var s,a,i=t.data;i.base_fee?(e.base_fee=Number(i.base_fee),e.gas_used=Number(i.gas_used),s=Number(i.gas_premium),a=e.gasFeeCap(i.base_fee,2.9,4.9,s),t=e.gasLimit(i.actor_exist,i.gas_used),e.$set(e.ordinary,"gas_premium",s),e.$set(e.ordinary,"gasfee_cap",a),e.$set(e.ordinary,"gas_limit",t),e.$set(e.ordinary,"cost",a*t),i=e.gasFeeCap(i.base_fee,3,5,s),e.$set(e.fast,"gas_premium",s),e.$set(e.fast,"gasfee_cap",i),e.$set(e.fast,"gas_limit",t),e.$set(e.fast,"cost",i*t)):e.errorInit()})).catch((function(t){e.errorInit()}))},errorInit:function(){this.base_fee=0,this.gas_used=0,this.$set(this.ordinary,"gas_premium",0),this.$set(this.ordinary,"gasfee_cap",0),this.$set(this.ordinary,"gas_limit",0),this.$set(this.ordinary,"cost",0),this.$set(this.fast,"gas_premium",0),this.$set(this.fast,"gasfee_cap",0),this.$set(this.fast,"gas_limit",0),this.$set(this.fast,"cost",0)},gasLimit:function(t,e){return e=1.25*Number(e),t?Math.floor(e):22e5},gasFeeCap:function(t,e,s,a){return e*Number(t)+a},gasPremium:function(){return Math.pow(10,6)},getFilPricePoints:function(){var t=this;Object(p.c)(["real"]).then((function(e){e=e.data,e&&e.data.length&&(t.price_usd=Number(e.data[0].price_usd))}))},next:function(){switch(this.filUsd=this.fil*this.price_usd,this.type){case 1:this.gasFee=this.fast.gasfee_cap*this.fast.gas_limit,this.gasFeeUsd=this.gasFee*this.price_usd,this.totalFee=this.gasFee+this.fil*Math.pow(10,18),this.totalFeeUsd=this.totalFee*this.price_usd;break;case 2:this.gasFee=this.ordinary.gasfee_cap*this.ordinary.gas_limit,this.gasFeeUsd=this.gasFee*this.price_usd,this.totalFee=this.gasFee+this.fil*Math.pow(10,18),this.totalFeeUsd=this.totalFee*this.price_usd;break;case 3:this.gasFee=this.custom.cost,this.gasFeeUsd=this.gasFee*this.price_usd,this.totalFee=this.custom.totalFil,this.totalFeeUsd=this.totalFee*this.price_usd}this.totalFee/Math.pow(10,18)>this.balance?this.$message.error(this.$t("sendFil.insufficientBalance")):this.step=2},getCostGas:function(){switch(this.type){case 1:return{gas_premium:this.fast.gas_premium,gasfee_cap:this.fast.gasfee_cap,gas_limit:this.fast.gas_limit};case 2:return{gas_premium:this.ordinary.gas_premium,gasfee_cap:this.ordinary.gasfee_cap,gas_limit:this.ordinary.gas_limit};case 3:return{gas_premium:this.custom.gas_premium,gasfee_cap:this.custom.gasfee_cap,gas_limit:this.custom.gas_limit};default:return{gas_premium:this.fast.gas_premium,gasfee_cap:this.fast.gasfee_cap,gas_limit:this.fast.gas_limit}}},customFil:function(){var t,e,s,a,i;this.custom.nanofil?(t=this.custom.nanofil*Math.pow(10,9)+this.base_fee,e=.01*Math.pow(10,9),i=(a=t*(s=1.25*this.gas_used))+this.fil*Math.pow(10,18),this.$set(this.custom,"gas_premium",e),this.$set(this.custom,"gasfee_cap",t),this.$set(this.custom,"gas_limit",s),this.$set(this.custom,"cost",a),this.$set(this.custom,"totalFil",i)):(this.$set(this.custom,"gas_premium",""),this.$set(this.custom,"gasfee_cap",0),this.$set(this.custom,"gas_limit",""),this.$set(this.custom,"cost",0),this.$set(this.custom,"totalFil",0))},reset:function(){this.type=1,this.$set(this.custom,"gas_premium",""),this.$set(this.custom,"gasfee_cap",0),this.$set(this.custom,"gas_limit",""),this.$set(this.custom,"cost",0),this.$set(this.custom,"totalFil",0),this.$set(this.custom,"nanofil","")},sendFil:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function s(){var a,i,n,c,o;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,window.filecoinwalletDb.activeAccount.where({kunyao:"kunyao"}).toArray();case 2:if(s.t0=s.sent,s.t0){s.next=5;break}s.t0=[];case 5:return c=s.t0,n=c.length&&c[0].privateKey,i=e.address,a=Object(N.b)(n,i,t),s.next=11,Object(N.d)(i,t,n,e.digest);case 11:if(s.sent)return c=e.getCostGas(),i=c.gas_premium,n=c.gasfee_cap,o=c.gas_limit,c=Object(l.a)(e.fil),o={Version:0,To:e.to,From:e.address,Nonce:e.maxNonce,Value:c,GasPremium:i.toString(),GasFeeCap:n.toString(),GasLimit:Math.ceil(o),Method:0,Params:""},s.next=19,function(){return $.apply(this,arguments)}(o,a);s.next=24;break;case 19:o=s.sent,o=[Object(r.a)({},o)],e.mesgPush(o),s.next=26;break;case 24:e.confrim=!1,e.$message.error(e.$t("sendFil.error"));case 26:case"end":return s.stop()}}),s)})))()},mesgPush:function(t){var e=this;Object(p.f)(t).then(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(s){var a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.confrim=!1,a=s.data["/"],i=parseInt((new Date).getTime()/1e3),t.next=5,window.filecoinwalletDb.messageList.add({signed_cid:a,from:e.address,to:e.to,create_time:i,block_time:i,nonce:e.maxNonce+1,type:"pending",typeName:e.$t("sendFil.waiting"),kunyao:"kunyao",value:e.fil*Math.pow(10,18)});case 5:return t.next=7,window.filecoinwalletDb.addressRecordLast.where({address:e.to}).delete();case 7:return t.next=9,window.filecoinwalletDb.addressRecordLast.add({address:e.to,create_time:i,kunyao:"kunyao"});case 9:window.location.href="./wallet.html";case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.confrim=!1}))},save:function(){this.type=3,this.customVisible=!1}}}),s("68dc"),Object(f.a)(e,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticClass:"send-fil"},[e("bHeader"),1===t.step?e("stepOne",{attrs:{type:t.type,customVisible:t.customVisible,to:t.to,fil:t.fil,price_usd:t.price_usd,ordinary:t.ordinary,fast:t.fast,custom:t.custom,step:t.step,pageType:t.pageType,balance:t.balance,address:t.address},on:{"update:type":function(e){t.type=e},"update:customVisible":function(e){t.customVisible=e},"update:custom-visible":function(e){t.customVisible=e},"update:to":function(e){t.to=e},"update:fil":function(e){t.fil=e},"update:step":function(e){t.step=e},"update:pageType":function(e){t.pageType=e},"update:page-type":function(e){t.pageType=e},next:t.next,reset:t.reset}}):e("stepTwo",{attrs:{step:t.step,accountName:t.accountName,to:t.to,fil:t.fil,filUsd:t.filUsd,price_usd:t.price_usd,gasFee:t.gasFee,totalFee:t.totalFee,gasFeeUsd:t.gasFeeUsd,totalFeeUsd:t.totalFeeUsd,pageType:t.pageType,confrim:t.confrim},on:{"update:step":function(e){t.step=e},"update:pageType":function(e){t.pageType=e},"update:page-type":function(e){t.pageType=e},"update:confrim":function(e){t.confrim=e},sendFil:t.sendFil}}),e("el-dialog",{attrs:{visible:t.customVisible,width:"95%","show-close":!1},on:{"update:visible":function(e){t.customVisible=e}}},[e("div",{staticClass:"dialog-content"},[e("div",{staticClass:"close",on:{click:function(e){t.customVisible=!1}}},[e("i",{staticClass:"el-icon-close"})]),e("div",{staticClass:"top"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("sendFil.customFuel")))]),e("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("sendFil.senior")))])]),e("div",{staticClass:"miner-fee"},[e("div",{staticClass:"text"},[t._v(t._s(t.$t("sendFil.minerFees")))]),e("i",{staticClass:"el-icon-question"}),e("el-input",{attrs:{min:"0",type:"number"},on:{input:t.customFil},model:{value:t.custom.nanofil,callback:function(e){t.$set(t.custom,"nanofil",e)},expression:"custom.nanofil"}},[e("template",{slot:"append"},[t._v("nanoFIL")])],2)],1),e("div",{staticClass:"info-wrap"},[e("div",{staticClass:"info-item"},[e("div",{staticClass:"key"},[t._v(t._s(t.$t("sendFil.sendAmount")))]),e("div",{staticClass:"value"},[t._v(t._s(t.fil)+" FIL")])]),e("div",{staticClass:"info-item"},[e("div",{staticClass:"key"},[t._v(t._s(t.$t("sendFil.transFees")))]),e("div",{staticClass:"value"},[t._v(t._s(t.custom.cost/Math.pow(10,18))+" FIL")])]),e("div",{staticClass:"info-item"},[e("div",{staticClass:"key"},[t._v(t._s(t.$t("sendFil.newTotal")))]),e("div",{staticClass:"value"},[e("div",{staticClass:"bolder"},[t._v(t._s(t.custom.totalFil/Math.pow(10,18))+" FIL")]),e("div",[t._v(" "+t._s((t.custom.totalFil*t.price_usd/Math.pow(10,18)).toFixed(2))+" USD")])])])]),e("div",{staticClass:"btn-wrap"},[e("el-button",{attrs:{type:"primary",disabled:!t.disabled},on:{click:t.save}},[t._v(t._s(t.$t("sendFil.save")))])],1)])])],1)}),[],!1,null,"895ee91e",null).exports);u=s("12cb"),f=s("a18c"),e=s("4360");n.default.use(i.a),n.default.component("pageComponent",T),new n.default({el:"#app",i18n:u.a,router:f.a,store:e.a,render:function(t){return t(T)}})},"68dc":function(t,e,s){"use strict";s("0ce9")},aa19:function(t,e,s){},af3f:function(t,e,s){},d266:function(t,e,s){"use strict";s("aa19")},ee09:function(t,e,s){"use strict";s("af3f")}});